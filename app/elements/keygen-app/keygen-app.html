<link rel="import" href="../../../bower_components/paper-shadow/paper-shadow.html"/>
<link rel="import" href="../../../bower_components/paper-input/paper-input-decorator.html"/>

<polymer-element name="keygen-app">
  <template>
    <link rel="stylesheet" href="keygen-app.css">

    <paper-shadow z="1" class="container">
      <h1 class="header">Udaan15 Poll Keygen</h1>
      <paper-input-decorator id="enroll" floatingLabel label="Enrollment No.">
        <input autofocus is="core-input" type="text" title="Enrollment No." value="{{enroll}}"/>
      </paper-input-decorator>
      <paper-input-decorator id="key" floatingLabel label="Key">
        <input is="core-input" type="text" disabled title="Key" value="{{key}}"/>
      </paper-input-decorator>
    </paper-shadow>

  </template>
  <script>
    (function () {
      Polymer({
        sanitizeEnroll: function () {
          this.enroll = this.enroll.replace(/\D/, '');
        },
        enrollChanged: function (oldValue) {
          this.sanitizeEnroll();
          if(this.enroll == ''){
            this.key = '';
          } else {
            this.key = md5(md5(this.enroll)).substr(0, 4);
          }
          this.$.key.updateLabelVisibility(this.key);
        }
      });
    })();
  </script>
</polymer-element>
